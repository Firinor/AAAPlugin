# Инструкция по использованию Architectural Analysis Agent

## Описание
**Architectural Analysis Agent** - это инструмент для визуального анализа архитектуры кода в Unity, который позволяет:
- Просматривать зависимости между классами
- Анализировать структуру наследования
- Визуализировать связи между типами
- Исследовать сборки и скрипты

## Установка
1. Поместите скрипт в папку `Assets/Editor` вашего Unity-проекта
2. Убедитесь, что у вас есть необходимые зависимости (Unity 2020.1 или новее для полного функционала)

## Использование

### Открытие окна
В меню Unity выберите:  
`FirUtility` > `Architectural Analysis Agent`

### Интерфейс
Окно разделено на две основные секции:

#### 1. Секция выбора кода (верхняя часть)
**Левая панель**:
- Выбор Assembly Definition Asset
- Выбор MonoScript
- Кнопка анализа (▼) - генерирует узлы для выбранного скрипта

**Правая панель**:
- Выбор сборки из списка
- Выбор скрипта из списка
- Кнопки группировки (значок папки)
- Кнопки поиска (значок лупы)
- Кнопка анализа (▼)

#### 2. Секция визуализации (нижняя часть)
Отображает граф зависимостей с возможностью:
- Масштабирования (колесико мыши)
- Перемещения (перетаскивание ЛКМ)

### Основные функции

#### Генерация графа
1. Выберите скрипт (через ObjectField или из dropdown)
2. Нажмите кнопку **"▼"** для генерации узлов

#### Работа с узлами
- **ЛКМ** - выделение узла
- **ПКМ на узле** - контекстное меню:
  - *Edit* - редактирование узла
  - *Remove* - удаление узла  
  - *Copy* - копирование имени класса
  - *Add connection* - добавление связи
  - *Remove connections* - удаление всех связей узла

- **Перетаскивание** - ЛКМ на пустой области
- **Создание связи**:
  1. Нажмите "Add connection" на исходном узле
  2. Кликните ЛКМ на целевом узле

#### Горячие клавиши
- **Ctrl+C** - копирование имени выделенного класса

### Генерация связей
При анализе типа автоматически создаются связи в 4 направлениях:

1. **Вверх**  
   Родительские классы и интерфейсы
   
2. **Вправо**  
   Используемые типы (поля, свойства, параметры методов)

3. **Вниз**  
   Классы-наследники

4. **Влево**  
   Типы, которые используют анализируемый тип

## Особенности
- Поддержка generic-типов
- Фильтрация системных типов
- Визуальное различие типов по цвету
- Адаптивный layout для большого количества узлов

## Ограничения
- Максимальное количество отображаемых узлов: **512**
- Максимальное количество узлов для отображения связей: **256**
- Полный функционал dropdown доступен только в **Unity 2020.1+**

## Советы
- Используйте кнопку **"To start position"** для сброса позиции
- Группировка в dropdown помогает работать с большими списками
- Для сложных типов сначала анализируйте базовые классы
